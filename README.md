# OCR 图像内容识别工具说明书

## 概述
此工具是一个基于 Python 的命令行程序，用于从图像文件中提取文本内容（OCR，Optical Character Recognition）。它运行于 Linux 环境，支持多种图像格式，并具备批量处理、缓存和多线程功能，旨在提高识别效率和用户体验。

当前版本发布日期：2025年3月13日  
开发者：KoGFuzi

## 功能特点
1. **支持的图像格式**：`.jpg`、`.png`、`.bmp`、`.bpg`
2. **多线程处理**：利用多线程技术加速批量图像处理。
3. **缓存机制**：已识别的图像结果会被缓存，避免重复处理。
4. **图像预处理**：自动将图像转为灰度图并增强对比度，提升识别准确性。
5. **语言支持**：默认使用英语（`eng`），可自定义其他语言（需安装对应 Tesseract 语言包）。
6. **友好的终端界面**：使用彩色输出和艺术字提示，提升交互体验。

## 依赖安装
在运行程序前，请确保安装以下依赖：
1. **Python 3.x**：运行环境。
2. **Tesseract OCR**：用于文本识别。
   - 安装命令（Ubuntu 示例）：`sudo apt-get install tesseract-ocr`
   - 语言包安装（可选）：`sudo apt-get install tesseract-ocr-<lang>`（如 `tesseract-ocr-chi-sim`）
3. **Python 库**：
   - 安装命令：`pip install Pillow pytesseract pyfiglet colorama`
4. **BPG 支持**（可选）：若需识别 `.bpg` 文件，需安装 `bpgdec`。
   - 安装方法：参考 [BPG 官方网站](https://bellard.org/bpg/)。

## 使用方法
1. **启动程序**：
   - 在终端中运行脚本：`python3 imgrec.py`
   - 程序启动后将显示欢迎界面，列出支持的功能和格式。

2. **输入路径**：
   - 输入单个图像文件路径（示例：`/home/user/image.jpg`）。
   - 或输入文件夹路径以批量处理其中所有支持的图像文件。
   - 输入 `quit` 退出程序。

3. **选择语言**：
   - 系统提示输入识别语言，默认值为 `eng`（英语）。
   - 按回车使用默认值，或输入其他语言代码（如 `chi_sim` 表示简体中文）。

4. **查看结果**：
   - 程序将处理图像并在终端显示识别结果。
   - 每张图像的结果包括文件路径和提取的文本内容（若无文本则提示未识别）。

## 示例操作
```
$ python3 imgrec.py
[欢迎界面显示]
请输入图像路径或文件夹（输入 'quit' 退出）：/home/user/images
请输入识别语言（默认 'eng'）：eng
开始处理 3 个图像文件...
/home/user/images/1.jpg - 识别结果：
Hello World
--------------------------------------------------
/home/user/images/2.png - 未识别到任何文本内容
--------------------------------------------------
/home/user/images/3.bpg - 识别结果：
Sample Text
--------------------------------------------------
处理完成，耗时 2.34 秒
```

## 注意事项
1. **文件权限**：确保程序对输入路径有读取权限。
2. **Tesseract 配置**：若未安装 Tesseract 或语言包，程序将报错。
3. **BPG 文件**：处理 `.bpg` 文件需安装 `bpgdec`，否则会提示错误。
4. **缓存使用**：同一文件重复识别时将直接从缓存读取结果。
5. **错误处理**：程序会显示详细错误信息（如文件不存在、无权限等）。

## 故障排查
- **Tesseract 未安装**：检查 `tesseract --version`，若无输出，请安装 Tesseract。
- **BPG 转换失败**：确认 `bpgdec` 是否可用，运行 `bpgdec -h` 测试。
- **识别结果为空**：检查图像清晰度，或尝试调整语言参数。

## 联系与支持
如需帮助或反馈，请联系我：forjiangzy@outlook.com。
